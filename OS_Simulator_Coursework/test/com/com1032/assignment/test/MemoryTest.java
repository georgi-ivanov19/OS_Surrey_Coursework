package com.com1032.assignment.test;

import com.com1032.assignment.*;
import com.com1032.assignment.Process;
import static org.junit.Assert.*;
import java.io.File;
import java.io.FileNotFoundException;
import java.util.List;
import org.junit.Test;

public class MemoryTest {
	ProcessScheduler ps = new ProcessScheduler();
	@Test
	public void testInput2() throws FileNotFoundException {
		Memory memory = new Memory();
		List<Process> processes = ps
				.constructReadyQueue(new File("D:\\Eclipse Workspace\\OS_Simulator_Coursework\\TestInput2.txt"));
		memory.addMemoryFromListOfProcesses(processes);
		assertEquals("\nFree Memory - 3881.00kb/4096kb\nUsed Memory - 215.00kb/4096kb\nFree Frames - 7762/8192\nUsed Frames - 430/8192\n", memory.checkMemory());
		assertEquals("P | F\n" +
					 "0 | 0\n" + 
					 "1 | 1\n" + 
					 "2 | 2\n" + 
					 "3 | 3\n" + 
					 "4 | 4\n" + 
					 "5 | 5\n" + 
					 "6 | 6\n" + 
					 "7 | 7\n" + 
					 "8 | 8\n" + 
					 "9 | 9\n" + 
					"10 | 10\n" + 
					"11 | 11\n" + 
					"12 | 12\n" + 
					"13 | 13\n" + 
					"14 | 14\n" + 
					"15 | 15\n" + 
					"16 | 16\n" + 
					"17 | 17\n" + 
					"18 | 18\n" + 
					"19 | 19\n" + 
					"20 | 20\n" + 
					"21 | 21\n" + 
				     "0 | 22\n" + 
				     "1 | 23\n" + 
					 "2 | 24\n" + 
				     "3 | 25\n" + 
					 "4 | 26\n" + 
					 "5 | 27\n" + 
				   	 "0 | 28\n" + 
					 "1 | 29\n" + 
					 "2 | 30\n" + 
					 "3 | 31\n" + 
					 "0 | 32\n" + 
					 "1 | 33\n" + 
					 "2 | 34\n" + 
					 "3 | 35\n" + 
					 "4 | 36\n" + 
					 "5 | 37\n" + 
					 "6 | 38\n" + 
					 "7 | 39\n" + 
					 "8 | 40\n" + 
					 "9 | 41\n" + 
					"10 | 42\n" + 
					"11 | 43\n" + 
					"12 | 44\n" + 
					"13 | 45\n" + 
					"14 | 46\n" + 
					"15 | 47\n" + 
					"16 | 48\n" + 
					"17 | 49\n" + 
					"18 | 50\n" + 
					"19 | 51\n" + 
					"20 | 52\n" + 
					"21 | 53\n" + 
					"22 | 54\n" + 
					"23 | 55\n" + 
					"24 | 56\n" + 
					"25 | 57\n" + 
					"26 | 58\n" + 
					"27 | 59\n" + 
					"28 | 60\n" + 
					"29 | 61\n" + 
					"30 | 62\n" + 
					"31 | 63\n" + 
					"32 | 64\n" + 
					"33 | 65\n" + 
					"34 | 66\n" + 
					"35 | 67\n" + 
					"36 | 68\n" + 
					"37 | 69\n" + 
					"38 | 70\n" + 
					"39 | 71\n" + 
					"40 | 72\n" + 
					"41 | 73\n" + 
					"42 | 74\n" + 
					"43 | 75\n" + 
					"44 | 76\n" + 
					"45 | 77\n" + 
					"46 | 78\n" + 
					"47 | 79\n" + 
					"48 | 80\n" + 
					"49 | 81\n" + 
					"50 | 82\n" + 
					"51 | 83\n" + 
					"52 | 84\n" + 
					"53 | 85\n" + 
					"54 | 86\n" + 
					"55 | 87\n" + 
					"56 | 88\n" + 
					"57 | 89\n" + 
					"58 | 90\n" + 
					"59 | 91\n" + 
					"60 | 92\n" + 
					"61 | 93\n" + 
					"62 | 94\n" + 
					"63 | 95\n" + 
					"64 | 96\n" + 
					"65 | 97\n" + 
					"66 | 98\n" + 
					"67 | 99\n" + 
					"68 | 100\n" + 
					"69 | 101\n" + 
					"70 | 102\n" + 
					"71 | 103\n" + 
					"72 | 104\n" + 
					"73 | 105\n" + 
					"74 | 106\n" + 
					"75 | 107\n" + 
					"76 | 108\n" + 
					"77 | 109\n" + 
					"78 | 110\n" + 
					"79 | 111\n" + 
					"80 | 112\n" + 
					"81 | 113\n" + 
					"82 | 114\n" + 
					"83 | 115\n" + 
					"84 | 116\n" + 
					"85 | 117\n" + 
					"86 | 118\n" + 
					"87 | 119\n" + 
					"88 | 120\n" + 
					"89 | 121\n" + 
					"90 | 122\n" + 
					"91 | 123\n" + 
					"92 | 124\n" + 
					"93 | 125\n" + 
					"94 | 126\n" + 
					"95 | 127\n" + 
					 "0 | 128\n" + 
					 "1 | 129\n" + 
					 "2 | 130\n" + 
					 "3 | 131\n" + 
					 "4 | 132\n" + 
					 "5 | 133\n" + 
					 "6 | 134\n" + 
					 "7 | 135\n" + 
					 "8 | 136\n" + 
					 "9 | 137\n" + 
					"10 | 138\n" + 
					"11 | 139\n" + 
					 "0 | 140\n" + 
					 "1 | 141\n" + 
					 "2 | 142\n" + 
					 "3 | 143\n" + 
					 "4 | 144\n" + 
					 "5 | 145\n" + 
					 "6 | 146\n" + 
					 "7 | 147\n" + 
					 "8 | 148\n" + 
					 "9 | 149\n" + 
					"10 | 150\n" + 
					"11 | 151\n" + 
					"12 | 152\n" + 
					"13 | 153\n" + 
					"14 | 154\n" + 
					"15 | 155\n" + 
					"16 | 156\n" + 
					"17 | 157\n" + 
					 "0 | 158\n" + 
					 "1 | 159\n" + 
					 "2 | 160\n" + 
					 "3 | 161\n" + 
					 "4 | 162\n" + 
					 "5 | 163\n" + 
					 "6 | 164\n" + 
					 "7 | 165\n" + 
					 "8 | 166\n" + 
					 "9 | 167\n" + 
					"10 | 168\n" + 
					"11 | 169\n" + 
					"12 | 170\n" + 
					"13 | 171\n" + 
					"14 | 172\n" + 
					"15 | 173\n" + 
					"16 | 174\n" + 
					"17 | 175\n" + 
					"18 | 176\n" + 
					"19 | 177\n" + 
					"20 | 178\n" + 
					"21 | 179\n" + 
					"22 | 180\n" + 
					"23 | 181\n" + 
					"24 | 182\n" + 
					"25 | 183\n" + 
					"26 | 184\n" + 
					"27 | 185\n" + 
					"28 | 186\n" + 
					"29 | 187\n" + 
					"30 | 188\n" + 
					"31 | 189\n" + 
					"32 | 190\n" + 
					"33 | 191\n" + 
					"34 | 192\n" + 
					"35 | 193\n" + 
					 "0 | 194\n" + 
					 "1 | 195\n" + 
					 "2 | 196\n" + 
					 "3 | 197\n" + 
					 "4 | 198\n" + 
					 "5 | 199\n" + 
					 "6 | 200\n" + 
					 "7 | 201\n" + 
					 "8 | 202\n" + 
					 "9 | 203\n" + 
					"10 | 204\n" + 
					"11 | 205\n" + 
					"12 | 206\n" + 
					"13 | 207\n" + 
					"14 | 208\n" + 
					"15 | 209\n" + 
					"16 | 210\n" + 
					"17 | 211\n" + 
					"18 | 212\n" + 
					"19 | 213\n" + 
					"20 | 214\n" + 
					"21 | 215\n" + 
					"22 | 216\n" + 
					"23 | 217\n" + 
					"24 | 218\n" + 
					"25 | 219\n" + 
					"26 | 220\n" + 
					"27 | 221\n" + 
					"28 | 222\n" + 
					"29 | 223\n" + 
					"30 | 224\n" + 
					"31 | 225\n" + 
					"32 | 226\n" + 
					"33 | 227\n" + 
					"34 | 228\n" + 
					"35 | 229\n" + 
					"36 | 230\n" + 
					"37 | 231\n" + 
					"38 | 232\n" + 
					"39 | 233\n" + 
					"40 | 234\n" + 
					"41 | 235\n" + 
					"42 | 236\n" + 
					"43 | 237\n" + 
					"44 | 238\n" + 
					"45 | 239\n" + 
					"46 | 240\n" + 
					"47 | 241\n" + 
					"48 | 242\n" + 
					"49 | 243\n" + 
					"50 | 244\n" + 
					"51 | 245\n" + 
					"52 | 246\n" + 
					"53 | 247\n" + 
					"54 | 248\n" + 
					"55 | 249\n" + 
					"56 | 250\n" + 
					"57 | 251\n" + 
					"58 | 252\n" + 
					"59 | 253\n" + 
					"60 | 254\n" + 
					"61 | 255\n" + 
					"62 | 256\n" + 
					"63 | 257\n" + 
					"64 | 258\n" + 
					"65 | 259\n" + 
					"66 | 260\n" + 
					"67 | 261\n" + 
					"68 | 262\n" + 
					"69 | 263\n" + 
					"70 | 264\n" + 
					"71 | 265\n" + 
					"72 | 266\n" + 
					"73 | 267\n" + 
					"74 | 268\n" + 
					"75 | 269\n" + 
					"76 | 270\n" + 
					"77 | 271\n" + 
					"78 | 272\n" + 
					"79 | 273\n" + 
					"80 | 274\n" + 
					"81 | 275\n" + 
					"82 | 276\n" + 
					"83 | 277\n" + 
					"84 | 278\n" + 
					"85 | 279\n" + 
					"86 | 280\n" + 
					"87 | 281\n" + 
					"88 | 282\n" + 
					"89 | 283\n" + 
					"90 | 284\n" + 
					"91 | 285\n" + 
					"92 | 286\n" + 
					"93 | 287\n" + 
					"94 | 288\n" + 
					"95 | 289\n" + 
					"96 | 290\n" + 
					"97 | 291\n" + 
					"98 | 292\n" + 
					"99 | 293\n" + 
				   "100 | 294\n" + 
				   "101 | 295\n" + 
				   "102 | 296\n" + 
				   "103 | 297\n" + 
				   "104 | 298\n" + 
				   "105 | 299\n" + 
				   "106 | 300\n" + 
				   "107 | 301\n" + 
				   "108 | 302\n" + 
				   "109 | 303\n" + 
				   "110 | 304\n" + 
				   "111 | 305\n" + 
				   "112 | 306\n" + 
				   "113 | 307\n" + 
				   "114 | 308\n" + 
				   "115 | 309\n" + 
				   "116 | 310\n" + 
				   "117 | 311\n" + 
				   "118 | 312\n" + 
				   "119 | 313\n" + 
				   "120 | 314\n" + 
				   "121 | 315\n" + 
				   "122 | 316\n" + 
				   "123 | 317\n" + 
				   "124 | 318\n" + 
				   "125 | 319\n" + 
				   "126 | 320\n" + 
				   "127 | 321\n" + 
				   	 "0 | 322\n" + 
				   	 "1 | 323\n" + 
				   	 "2 | 324\n" + 
				   	 "3 | 325\n" + 
				   	 "4 | 326\n" + 
				   	 "5 | 327\n" + 
				   	 "6 | 328\n" + 
				   	 "7 | 329\n" + 
				   	 "8 | 330\n" + 
				   	 "9 | 331\n" + 
				   	"10 | 332\n" + 
				   	"11 | 333\n" + 
				  	"12 | 334\n" + 
				  	"13 | 335\n" + 
				  	"14 | 336\n" + 
				    "15 | 337\n" + 
				   	"16 | 338\n" + 
					"17 | 339\n" + 
					"18 | 340\n" + 
					"19 | 341\n" + 
					"20 | 342\n" + 
					"21 | 343\n" + 
					"22 | 344\n" + 
					"23 | 345\n" + 
					"24 | 346\n" + 
					"25 | 347\n" + 
					"26 | 348\n" + 
					"27 | 349\n" + 
					"28 | 350\n" + 
					"29 | 351\n" + 
					"30 | 352\n" + 
					"31 | 353\n" + 
					"32 | 354\n" + 
					"33 | 355\n" + 
					 "0 | 356\n" + 
					 "1 | 357\n" + 
					 "2 | 358\n" + 
					 "3 | 359\n" + 
					 "4 | 360\n" + 
					 "5 | 361\n" + 
					 "6 | 362\n" + 
					 "7 | 363\n" + 
					 "8 | 364\n" + 
					 "9 | 365\n" + 
					"10 | 366\n" + 
					"11 | 367\n" + 
					"12 | 368\n" + 
					"13 | 369\n" + 
					"14 | 370\n" + 
					"15 | 371\n" + 
					"16 | 372\n" + 
					"17 | 373\n" + 
					"18 | 374\n" + 
					"19 | 375\n" + 
					"20 | 376\n" + 
					"21 | 377\n" + 
					"22 | 378\n" + 
					"23 | 379\n" + 
					"24 | 380\n" + 
					"25 | 381\n" + 
					"26 | 382\n" + 
					"27 | 383\n" + 
					"28 | 384\n" + 
					"29 | 385\n" + 
					"30 | 386\n" + 
					"31 | 387\n" + 
					"32 | 388\n" + 
					"33 | 389\n" + 
					"34 | 390\n" + 
					"35 | 391\n" + 
					 "0 | 392\n" + 
					 "1 | 393\n" + 
					 "2 | 394\n" + 
					 "3 | 395\n" + 
					 "4 | 396\n" + 
					 "5 | 397\n" + 
					 "6 | 398\n" + 
					 "7 | 399\n" + 
					 "8 | 400\n" + 
					 "9 | 401\n" + 
					"10 | 402\n" + 
					"11 | 403\n" + 
					"12 | 404\n" + 
					"13 | 405\n" + 
					"14 | 406\n" + 
					"15 | 407\n" + 
					"16 | 408\n" + 
					"17 | 409\n" + 
					"18 | 410\n" + 
					"19 | 411\n" + 
					"20 | 412\n" + 
					"21 | 413\n" + 
					"22 | 414\n" + 
					"23 | 415\n" + 
					"24 | 416\n" + 
					"25 | 417\n" + 
					"26 | 418\n" + 
					"27 | 419\n" + 
					"28 | 420\n" + 
					"29 | 421\n" + 
					"30 | 422\n" + 
					"31 | 423\n" + 
					"32 | 424\n" + 
					"33 | 425\n" + 
					"34 | 426\n" + 
					"35 | 427\n" + 
					"36 | 428\n" + 
					"37 | 429\n", memory.pageTable());
		memory.wipeMemory();
		assertEquals("Page table is empty!", memory.pageTable());
		assertEquals("\nFree Memory - 4096.00kb/4096kb\nUsed Memory - 0.00kb/4096kb\nFree Frames - 8192/8192\nUsed Frames - 0/8192\n", memory.checkMemory());
		

	}

	@Test
	public void testInput1() throws FileNotFoundException {
		Memory memory = new Memory();
		List<Process> processes = ps
				.constructReadyQueue(new File("D:\\Eclipse Workspace\\OS_Simulator_Coursework\\TestInput1.txt"));
		memory.addMemoryFromListOfProcesses(processes);
		assertEquals("\nFree Memory - 4009.00kb/4096kb\nUsed Memory - 87.00kb/4096kb\nFree Frames - 8018/8192\nUsed Frames - 174/8192\n", memory.checkMemory());
		assertEquals("P | F\n" +
					 "0 | 0\n" + 
					 "1 | 1\n" + 
					 "2 | 2\n" + 
					 "3 | 3\n" + 
					 "4 | 4\n" + 
					 "5 | 5\n" + 
					 "6 | 6\n" + 
					 "7 | 7\n" + 
					 "8 | 8\n" + 
					 "9 | 9\n" + 
					"10 | 10\n" + 
					"11 | 11\n" + 
					"12 | 12\n" + 
					"13 | 13\n" + 
					"14 | 14\n" + 
					"15 | 15\n" + 
					"16 | 16\n" + 
					"17 | 17\n" + 
					"18 | 18\n" + 
					"19 | 19\n" + 
					"20 | 20\n" + 
					"21 | 21\n" + 
					"22 | 22\n" + 
					"23 | 23\n" + 
					"24 | 24\n" + 
					"25 | 25\n" + 
					"26 | 26\n" + 
					"27 | 27\n" + 
					"28 | 28\n" + 
					"29 | 29\n" + 
					 "0 | 30\n" + 
					 "1 | 31\n" + 
					 "2 | 32\n" + 
					 "3 | 33\n" + 
					 "4 | 34\n" + 
					 "5 | 35\n" + 
					 "6 | 36\n" + 
					 "7 | 37\n" + 
					 "8 | 38\n" + 
					 "9 | 39\n" + 
					"10 | 40\n" + 
					"11 | 41\n" + 
					"12 | 42\n" + 
					"13 | 43\n" + 
					"14 | 44\n" + 
					"15 | 45\n" + 
					"16 | 46\n" + 
					"17 | 47\n" + 
					"18 | 48\n" + 
					"19 | 49\n" + 
					"20 | 50\n" + 
					"21 | 51\n" + 
					"22 | 52\n" + 
					"23 | 53\n" + 
					"24 | 54\n" + 
					"25 | 55\n" + 
					 "0 | 56\n" + 
					 "1 | 57\n" + 
					 "2 | 58\n" + 
					 "3 | 59\n" + 
					 "4 | 60\n" + 
					 "5 | 61\n" + 
					 "6 | 62\n" + 
					 "7 | 63\n" + 
					 "8 | 64\n" + 
					 "9 | 65\n" + 
					 "0 | 66\n" + 
					 "1 | 67\n" + 
					 "2 | 68\n" + 
					 "3 | 69\n" + 
					 "4 | 70\n" + 
					 "5 | 71\n" + 
					 "6 | 72\n" + 
					 "7 | 73\n" + 
					 "8 | 74\n" + 
					 "9 | 75\n" + 
				    "10 | 76\n" + 
					"11 | 77\n" + 
					"12 | 78\n" + 
					"13 | 79\n" + 
					"14 | 80\n" + 
					"15 | 81\n" + 
					"16 | 82\n" + 
					"17 | 83\n" + 
					"18 | 84\n" + 
					"19 | 85\n" + 
					"20 | 86\n" + 
					"21 | 87\n" + 
					 "0 | 88\n" + 
					 "1 | 89\n" + 
					 "2 | 90\n" + 
					 "3 | 91\n" + 
					 "4 | 92\n" + 
					 "5 | 93\n" + 
					 "6 | 94\n" + 
					 "7 | 95\n" + 
					 "8 | 96\n" + 
					 "9 | 97\n" + 
					"10 | 98\n" + 
					"11 | 99\n" + 
					"12 | 100\n" + 
					"13 | 101\n" + 
					"14 | 102\n" + 
					"15 | 103\n" + 
					"16 | 104\n" + 
					"17 | 105\n" + 
					"18 | 106\n" + 
					"19 | 107\n" + 
					"20 | 108\n" + 
					"21 | 109\n" + 
					"22 | 110\n" + 
					"23 | 111\n" + 
					"24 | 112\n" + 
					"25 | 113\n" + 
					"26 | 114\n" + 
					"27 | 115\n" + 
					"28 | 116\n" + 
					"29 | 117\n" + 
					"30 | 118\n" + 
					"31 | 119\n" + 
					"32 | 120\n" + 
					"33 | 121\n" + 
					"34 | 122\n" + 
					"35 | 123\n" + 
					"36 | 124\n" + 
					"37 | 125\n" + 
					"38 | 126\n" + 
					"39 | 127\n" + 
					"40 | 128\n" + 
					"41 | 129\n" + 
					"42 | 130\n" + 
					"43 | 131\n" + 
					"44 | 132\n" + 
					"45 | 133\n" + 
					"46 | 134\n" + 
					"47 | 135\n" + 
					"48 | 136\n" + 
					"49 | 137\n" + 
					"50 | 138\n" + 
					"51 | 139\n" + 
					"52 | 140\n" + 
					"53 | 141\n" + 
					"54 | 142\n" + 
					"55 | 143\n" + 
					"56 | 144\n" + 
					"57 | 145\n" + 
					"58 | 146\n" + 
					"59 | 147\n" + 
					 "0 | 148\n" + 
					 "1 | 149\n" + 
					 "2 | 150\n" + 
					 "3 | 151\n" + 
					 "4 | 152\n" + 
					 "5 | 153\n" + 
					 "6 | 154\n" + 
					 "7 | 155\n" + 
					 "8 | 156\n" + 
					 "9 | 157\n" + 
					"10 | 158\n" + 
					"11 | 159\n" + 
					"12 | 160\n" + 
					"13 | 161\n" + 
					"14 | 162\n" + 
					"15 | 163\n" + 
					"16 | 164\n" + 
					"17 | 165\n" + 
					"18 | 166\n" + 
					"19 | 167\n" + 
					"20 | 168\n" + 
					"21 | 169\n" + 
					"22 | 170\n" + 
					"23 | 171\n" + 
					"24 | 172\n" + 
					"25 | 173\n", memory.pageTable());
		memory.wipeMemory();
		assertEquals("Page table is empty!", memory.pageTable());
		assertEquals("\nFree Memory - 4096.00kb/4096kb\nUsed Memory - 0.00kb/4096kb\nFree Frames - 8192/8192\nUsed Frames - 0/8192\n", memory.checkMemory());
	}

	@Test(expected = OutOfMemoryError.class)
	public void testTooMuchMemory() throws FileNotFoundException {
		Memory memory = new Memory();
		List<Process> processes = ps
				.constructReadyQueue(new File("D:\\Eclipse Workspace\\OS_Simulator_Coursework\\TooMuchMemory.txt"));
		memory.addMemoryFromListOfProcesses(processes);
	}
}
